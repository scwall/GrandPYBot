var finishGrandPyWrite=false;var numberLineText=1;$(function(){$.fn.scrollBottom=function(){return $(this).scrollTop($(this)[0].scrollHeight)};var a;a=$("#questionpapy");a.on("submit",function(d){d.preventDefault();var c;var f=$("#question").val();if(finishGrandPyWrite===true){var b=$("#chatBox");b.append("<img src='../static/assets/img/avatar.png' height='30' width='30'><span id='question"+numberLineText+"'></span></br>").scrollBottom();$("#question"+numberLineText).append("Moi : "+f+"</br>");finishGrandPyWrite=false;$.ajax({url:"question",type:"POST",data:JSON.stringify({grandfather_question:f}),datatype:"json",contentType:"application/json; charset=utf-8",success:function(e){if(e.correct_question===true){c={correct_question:true,googlemaps_result:e.googlemaps_result,wikipedia_result:e.wikipedia_result}}if(e.correct_question===false){c={correct_question:false}}}});b.append("<span id='tempory"+numberLineText+"'><img src='../static/assets/img/dimitri.png' height='30' width='30'>GrandPYBot : En train de réfléchir <img src='../static/assets/img/Eclipse-1s-200px.svg' height='30' width='30'></span>").scrollBottom().delay(3000).queue(function(){$("#tempory"+numberLineText).last().remove();if(c.correct_question===true){b.append("<img src='../static/assets/img/dimitri.png' height='30' width='30'><span id='response"+numberLineText+"'></span></br>").scrollBottom();typed=new Typed("#response"+numberLineText,{strings:["GrandPYBot : "+randomResponse],typeSpeed:40,backSpeed:30,backDelay:900,startDelay:1000,smartBackspace:true,showCursor:false,preStringTyped:function(g,e){playSound()},onComplete:function(h,e){finishGrandPyWrite=true;var g=$("#responseQuestion");$("#googlemaps").show("slow");g.empty();g.show("slow");g.text(c.wikipedia_result);map.setZoom(16);map.setCenter({lat:c.googlemaps_result.lat,lng:c.googlemaps_result.lng});b.clearQueue().finish();numberLineText+=1},loop:false})}if(c.correct_question===false){b.append("<span id='response"+numberLineText+"'></span></br>").scrollBottom();typed=new Typed("#response"+numberLineText,{strings:["GrandPYBot : Je n'ai pas compris la question, peux tu répéter"],typeSpeed:40,backSpeed:30,backDelay:900,startDelay:1000,smartBackspace:true,showCursor:false,preStringTyped:function(g,e){playSound()},onComplete:function(g,e){finishGrandPyWrite=true;b.clearQueue().finish();numberLineText+=1},loop:false})}})}});console.log("Ready ask question")});